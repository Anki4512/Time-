<div class="p-8 flex flex-col md:flex-row justify-between items-center bg-white/50 backdrop-blur-md gap-4 no-print">
    <div>
        <h1 class="text-3xl font-black text-slate-800 tracking-tighter italic">WEEKLY INSIGHTS</h1>
        <p class="text-slate-400 font-mono text-sm uppercase">Live Dashboard</p>
    </div>
    
    <div class="flex items-center gap-3">
        <button onclick="window.print()" class="flex items-center gap-2 bg-slate-800 text-white px-5 py-3 rounded-2xl shadow-lg hover:bg-slate-700 transition-all active:scale-95">
            <span>ðŸ“„</span>
            <span class="font-bold text-sm">Save PDF</span>
        </button>

        <button onclick="shareDashboard()" class="flex items-center gap-2 bg-indigo-600 text-white px-5 py-3 rounded-2xl shadow-lg hover:bg-indigo-700 transition-all active:scale-95">
            <span>ðŸ“¤</span>
            <span class="font-bold text-sm">Share Report</span>
        </button>

        <button onclick="location.reload()" class="bg-white border border-slate-200 p-3 rounded-2xl shadow-sm hover:rotate-180 transition-all duration-500 text-xl">
            ðŸ”„
        </button>
    </div>
</div>

<script>
async function shareDashboard() {
    const shareData = {
        title: 'Weekly Time Report',
        text: 'Check out the employee work hours for this week.',
        url: window.location.href
    };

    try {
        if (navigator.share) {
            await navigator.share(shareData);
        } else {
            alert('Sharing is not supported on this browser. Copy the URL manually!');
        }
    } catch (err) {
        console.log('Error sharing:', err);
    }
}
</script>

<style>
    /* This ensures buttons don't show up on the actual PDF/Printout */
    @media print {
        .no-print { display: none !important; }
        body { background: white; padding: 0; }
        .shadow-2xl { shadow: none; border: 1px solid #eee; }
    }
</style>
<tfoot class="bg-slate-800 text-white">
    <tr class="animate__animated animate__fadeIn">
        <td class="p-5 font-black uppercase text-xs tracking-widest">Grand Totals</td>
        {% set grand_total = namespace(value=0) %}
        {% for emp in employees %}
            <td class="p-5 text-center font-mono text-lg text-green-400 font-black">
                {% set emp_total = report[emp].values()|sum|round(2) %}
                {{ emp_total }}
                {% set grand_total.value = grand_total.value + emp_total %}
            </td>
        {% endfor %}
    </tr>
    <tr class="bg-indigo-900 border-t border-indigo-800">
        <td class="p-3 text-right text-[10px] uppercase font-bold text-indigo-300">Company Total (All Staff)</td>
        <td colspan="{{ employees|length }}" class="p-3 text-center text-xl font-black text-white">
            {{ grand_total.value|round(2) }} hrs
        </td>
    </tr>
</tfoot>